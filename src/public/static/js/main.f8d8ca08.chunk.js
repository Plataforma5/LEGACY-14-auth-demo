(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),s=n.n(c),i=n(11),u=n(12),o=n(3),l=n(2),p=n.n(l),j=n(5),b=n(14),h=n.n(b),d=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.prev=1,e.next=4,h.a.post("http://localhost:8080/api/register",{email:n,password:r});case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(j.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,r=t.password,e.prev=1,e.next=4,h.a.post("http://localhost:8080/api/login",{email:n,password:r});case 4:return a=e.sent,c=a.data,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("http://localhost:8080/api/isLogin");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("http://localhost:8080/api/private");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("http://localhost:8080/api/logout");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0.response);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),v=n(16),g=n(10),w=function(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({email:"",password:""}),s=Object(i.a)(c,2),u=s[0],o=s[1];return{err:n,inputs:u,setErr:a,handleChange:function(e){n&&a(""),o(Object(g.a)(Object(g.a)({},u),{},Object(v.a)({},e.target.name,e.target.value)))}}},C=Object(r.createContext)({user:null,loginDispatch:function(){return null},logoutDispatch:function(){return null}}),y=n(1),N=function(){var e=Object(o.g)(),t=Object(r.useContext)(C).loginDispatch,n=w(),a=n.handleChange,c=n.setErr,s=n.inputs,u=n.err,l=Object(r.useState)(!1),b=Object(i.a)(l,2),h=b[0],d=b[1],f=function(){var e=Object(j.a)(p.a.mark((function e(n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),d(!0),s.email&&s.password||c("Ingrese un email y una contrase\xf1a"),e.next=5,m(s);case 5:if(r=e.sent,d(!1),500!==r.status){e.next=9;break}return e.abrupt("return",c(r.data));case 9:t(r.email);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)(r.Fragment,{children:Object(y.jsxs)("form",{onSubmit:f,className:"form",children:[Object(y.jsx)("h1",{className:"title",children:"Iniciar Sesion"}),Object(y.jsx)("div",{className:"inputContainer",children:Object(y.jsx)("input",{type:"text",name:"email",className:"input",placeholder:"Correo Electr\xf3nico",value:s.email,onChange:a})}),Object(y.jsx)("div",{className:"inputContainer",children:Object(y.jsx)("input",{name:"password",type:"password",className:"input",placeholder:"Contrase\xf1a",value:s.password,onChange:a})}),u&&Object(y.jsx)("small",{className:"error",children:u}),Object(y.jsx)("div",{className:"btnContainear",children:Object(y.jsx)("button",{className:"btn",disabled:h,type:"submit",children:"ingresar"})}),Object(y.jsx)("small",{className:"link",onClick:function(t){t.preventDefault(),e.push("/auth/register")},children:"Registrarse"})]})})},k=function(){var e=Object(o.g)(),t=w(),n=t.handleChange,a=t.setErr,c=t.inputs,s=t.err,u=Object(r.useState)(!1),l=Object(i.a)(u,2),b=l[0],h=l[1],m=function(){var t=Object(j.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),c.email&&c.password||a("Ingrese un email y una contrase\xf1a"),h(!0),t.prev=3,t.next=6,d(c);case 6:h(!1),e.push("/account/login"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),a(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsx)(r.Fragment,{children:Object(y.jsxs)("form",{onSubmit:m,className:"form",children:[Object(y.jsx)("h1",{className:"title",children:"Registrarse"}),Object(y.jsx)("div",{className:"inputContainer",children:Object(y.jsx)("input",{type:"text",name:"email",className:"input",placeholder:"Correo Electr\xf3nico",value:c.email,onChange:n})}),Object(y.jsx)("div",{className:"inputContainer",children:Object(y.jsx)("input",{name:"password",type:"password",className:"input",placeholder:"Contrase\xf1a",value:c.password,onChange:n})}),s&&Object(y.jsx)("small",{className:"error",children:s}),Object(y.jsx)("div",{className:"btnContainear",children:Object(y.jsx)("button",{className:"btn",disabled:b,type:"submit",children:"registrarse"})}),Object(y.jsx)("small",{className:"link",onClick:function(t){t.preventDefault(),e.push("/auth/login")},children:"Iniciar Sesi\xf3n"})]})})},D=function(){return Object(y.jsxs)(o.d,{children:[Object(y.jsx)(o.b,{exact:!0,path:"/auth/register",component:k}),Object(y.jsx)(o.b,{exact:!0,path:"/auth/login",component:N}),Object(y.jsx)(o.b,{path:"*",children:Object(y.jsx)(o.a,{to:"/"})})]})},S=n.p+"static/media/private.3d975b4b.gif",E=function(){var e=Object(r.useContext)(C).logoutDispatch;Object(r.useEffect)((function(){Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))()}),[]);var t=function(){var t=Object(j.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,x();case 3:e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsx)(r.Fragment,{children:Object(y.jsxs)("div",{className:"container",children:[Object(y.jsx)("h1",{className:"title",children:"Ruta privada"}),Object(y.jsx)("img",{src:S,alt:"private-gif"}),Object(y.jsx)("p",{children:"Welcome to private route"}),Object(y.jsx)("div",{className:"btnContainear",children:Object(y.jsx)("button",{className:"btn",onClick:t,children:"logout"})})]})})},F=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(o.d,{children:[Object(y.jsx)(o.b,{exact:!0,path:"/private",component:E}),Object(y.jsx)(o.a,{to:"/private"})]})})},R=n(32),I=function(e){var t=e.isAuth,n=e.path,r=e.pathnameRedirect,a=e.component,c=Object(R.a)(e,["isAuth","path","pathnameRedirect","component"]);return Object(y.jsx)(o.b,Object(g.a)(Object(g.a)({},c),{},{exact:!0,path:n,render:function(){return t?Object(y.jsx)(a,{}):Object(y.jsx)(o.a,{to:r})}}))},A=function(){var e=Object(r.useContext)(C),t=e.user,n=e.loginDispatch;return Object(r.useEffect)((function(){Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:t=e.sent,n(t.email);case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(y.jsxs)(o.d,{children:[Object(y.jsx)(I,{pathnameRedirect:"/",isAuth:!(null===t||void 0===t?void 0:t.email),component:D,path:"/auth"}),Object(y.jsx)(I,{pathnameRedirect:"/auth/login",isAuth:null===t||void 0===t?void 0:t.email,component:F,path:"/"})]})},L={user:null},P=function(e,t){switch(t.type){case"login":var n=t.payload.email;return Object(g.a)(Object(g.a)({},e),{},{user:{email:n}});case"logout":return Object(g.a)(Object(g.a)({},e),{},{user:null});default:throw new Error("Invalid action type: ".concat(t.type))}},B=function(){var e=Object(r.useReducer)(P,L),t=Object(i.a)(e,2),n=t[0],a=t[1],c={loginDispatch:function(e){a({type:"login",payload:{email:e}})},logoutDispatch:function(){a({type:"logout"})},user:n.user};return Object(y.jsx)(r.Fragment,{children:Object(y.jsx)(C.Provider,{value:c,children:Object(y.jsx)(u.a,{children:Object(y.jsx)(o.b,{path:"/",component:A})})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(62);s.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(B,{})}),document.getElementById("root")),J()}},[[63,1,2]]]);
//# sourceMappingURL=main.f8d8ca08.chunk.js.map